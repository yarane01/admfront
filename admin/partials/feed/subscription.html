<div class="panel panel-default"
     float-panel
     ng-controller='FeedSubscriptionCtrl'>

    <div ng-include src="'partials/feed/bulkUpdate.html'"/>

    <div class="panel-heading">
        <div class="panel-title">
            Instrument subscription
        </div>
    </div>

    <div class="panel-body">

        <form name="form" class="form-horizontal"
              role="form" novalidate>

            <div ng-include="'partials/loading.html'"></div>

            <div ng-include="'partials/processing.html'"></div>

            <div ng-show="context.dataloaded && (!context.dataerror)">

                <div class="row">

                    <div class="col-sm-6">

                        <div class="btn-group">

                            <button class="btn btn-default"
                               id="select-all"
                               ng-click="selectAll()">
                                Select All
                            </button>

                            <button class="btn btn-default"
                               id="deselect-all"
                               ng-click="deselectAll()">
                                Deselect All
                            </button>

                            <button class="btn btn-default"
                               id="invert"
                               ng-click="invertSelection()">
                                Invert Selection
                            </button>

                        </div>

                        <div class="btn-group">

                            <button class="btn btn-warning"
                                    id="bulk"
                                    ng-disabled="context.selected < 2"
                                    ng-click="bulkUpdate()">
                                Bulk update
                            </button>

                        </div>

                    </div>

                    <!--<div class="col-sm-6 form-group">-->

                        <!--<label class="col-sm-8 control-label">-->
                            <!--Symbol-->
                        <!--</label>-->

                        <!--<div class="col-sm-4 input-group">-->
                            <!-- -->
                            <!--<input type="text"-->
                                   <!--ng-model="context.filter"-->
                                   <!--class="form-control"-->
                                   <!--placeholder="Filter...">-->
                            <!-- -->
                                    <!--<span class="input-group-btn">-->
                                        <!-- -->
                                        <!--<button class="btn btn-default"-->
                                                <!--ng-click="clearFilter()"-->
                                                <!--type="button">-->
                                            <!--<i class="fa fa-close"></i>-->
                                        <!--</button>-->
                                        <!-- -->
                                    <!--</span>-->
                            <!-- -->
                        <!--</div>-->
                        <!-- -->
                    <!--</div>-->

                </div>

                <!--<div ng-if="context.providers.length > 3">-->

                    <!--<div class="row">-->

                        <!--<div class="col-sm-12">-->

                            <!--<div class="btn-group btn-group-justified">-->

                                <!--<a href="Javascript:;" class="btn btn-default"-->
                                    <!--ng-repeat="(key, value) in context.mapType"-->
                                    <!--id="{{'button-' + key}}"-->
                                    <!--ng-click="selectByType(key)">-->
                                        <!--{{value}}-->
                                <!--</a>-->

                            <!--</div>-->

                        <!--</div>-->

                    <!--</div>-->

                    <!--<div class="row" style="margin-top: 30px">-->
                        <!--<div class="col-sm-12">-->
                            <!--<div ng-include="'partials/feed/symboltable.html'"></div>-->
                        <!--</div>-->
                    <!--</div>-->
                <!--</div>-->

                <!--<div ng-if="context.providers.length <= 3">-->

                    <div class="row" style="padding-top: 10px">

                        <div class="col-sm-10">

                            <div ng-include="'partials/feed/symboltable.html'">

                            </div>

                        </div>

                        <div class="col-sm-2">

                            <label class="control-label">
                                Instrument filter
                            </label>

                            <div class="input-group">

                                <input type="text"
                                       ng-model="context.filter"
                                       class="form-control"
                                       placeholder="Instrument...">

                                    <span class="input-group-btn">

                                        <button class="btn btn-default"
                                                ng-click="clearFilter()"
                                                type="button">
                                            <i class="fa fa-close"></i>
                                        </button>

                                    </span>

                            </div>

                            <label class="control-label" style="margin-top: 10px">
                                Provider filter
                            </label>

                            <div class="border" style="padding-left: 20px; padding-top: 10px; padding-bottom: 10px">

                                <div class="checkbox"
                                     ng-repeat="provider in context.providers.data">
                                    <label>
                                        <input type="checkbox"
                                               ng-model="provider.selected"
                                               ng-click="providerSelected()"
                                               ng-disabled="provider.selected && (getSelectedProvidersCount() == 1)" >
                                        {{provider.name}}
                                    </label>
                                </div>

                            </div>

                            <label class="control-label" style="margin-top: 10px">
                                Select by type
                            </label>

                            <div class="btn-group btn-group-vertical" style="padding-top: 5px">

                                <a href="Javascript:;" class="btn btn-default"
                                    ng-repeat="(key, value) in context.mapType"
                                    id="{{'button-' + key}}"
                                    ng-click="selectByType(key)">
                                        {{value}}
                                </a>

                            </div>
                        </div>

                    </div>

                <!--</div>-->

            </div>
        </form>
    </div>

    <div class="panel-footer">

        <div class="row" style="padding: 0px 10px" ng-show="context.dataloaded && (!context.dataerror)">

            <div style="float: left">
                {{context.selected}} selected out of {{context.count}}
                <div ng-show="context.filter != ''">{{context.filteredCount}} filtered</div>
            </div>

            <button type="button"
                    ng-show="context.changed"
                    ng-click="save()"
                    class="btn btn-primary pull-right">
                Save
            </button>

        </div>

    </div>
</div>

<!--<div ng-include src="'partials/feed/aliases.html'"></div>-->
<div ng-include="'partials/dashboard/feed.html'"></div>
